<% @users.each do |user| %>
	<%= semantic_form_for user, :remote => true, :html => {:class => 'userform'} do |f| %>
		
	    <%= f.inputs do %>
			<%= f.input :email, :input_html=>{:size=>20} %>
			<%= f.input :first_name, :input_html=>{:size=>20} %>
			<%= f.input :last_name, :input_html=>{:size=>20} %>
			<%= f.input :lat %>, <%= f.input :lon %>
			<%= f.input :street %>
			<%= f.input :city %>
			<%= f.input :zip %>
			<%= f.input :region %>
			<%= f.input :country, :as => :string %>
	    <% end %>
		<div class="errors" style="background-color: #FFAAAA; color: black;"></div>
		<div class="notice" style="background-color: #FFFFAA; color: black;"></div>
	    <%= f.buttons do %>
			<%= f.commit_button :label=>'Update' %>
	    <% end %>
	<% end %>
<% end %>
<script>
	$(document).ready(function(){
		$('.userform').live('ajax:error', function(event, xhr, status) { $(this).children('.errors').append(xhr.responseText) });
		$('.userform').live('ajax:success', function(event, xhr, status) { $(this).children('.notice').html('updated: '+xhr.responseText) });
		$('.userform').live('ajax:before', function(event, xhr, status) { $(this).children('.notice').html('saving address...') });
	});
</script>